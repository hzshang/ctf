
### gcc 编译选项  

选项|功能
---|---
-fstack-protector-all | 对所有函数进行栈保护
-fstack-protector     | 只对有buffer的函数进行栈保护
-fno-stack-protector  | 禁用栈保护
-z now					  | got表不可写
-z execstack			  | 堆栈可执行
-fPIE -pie			  | 开启PIE
--dynamic-linker=/dbg64/lib/ld-linux-x86-64.so.2|使用指定链接器链接
-I/dbg64/include | 指定include目录
-L | 指定链接的库目录
-lxxx| 指定链接库libxxx.so
-fPIC -shared |编译库文件

### 格式化字符串  
字符|功能
----|----
%c|输出字符，配上%n可用于向指定地址写数据。
%d|输出十进制整数，配上%n可用于向指定地址写数据。
%x|输出16进制数据，如%i$x表示要泄漏偏移i处4字节长的16进制数据，%i$lx表示要泄漏偏移i处8字节长的16进制数据，32bit和64bit环境下一样。
%p|输出16进制数据，与%x基本一样，只是附加了前缀0x，在32bit下输出4字节，在64bit下输出8字节，可通过输出字节的长度来判断目标环境是32bit还是64bit。
%s|输出的内容是字符串，即将偏移处指针指向的字符串输出，如%i$s表示输出偏移i处地址所指向的字符串，在32bit和64bit环境下一样，可用于读取GOT表等信息。
%n|将%n之前printf已经打印的字符个数赋值给偏移处指针所指向的地址位置，如%100×10$n表示将0x64写入偏移10处保存的指针所指向的地址（4字节），而%$hn表示写入的地址空间为2字节，%$hhn表示写入的地址空间为1字节，%$lln表示写入的地址空间为8字节，在32bit和64bit环境下一样。有时，直接写4字节会导致程序崩溃或等候时间过长，可以通过%$hn或%$hhn来适时调整。%n是通过格式化字符串漏洞改变程序流程的关键方式，而其他格式化字符串参数可用于读取信息或配合%n写数据。

